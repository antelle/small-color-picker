/*! SmallColorPicker v1.1.1  | (c) 2013 Antelle | https://github.com/antelle/small-color-picker/blob/master/MIT-LICENSE.txt */
(function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Mode={COLOR:1,NUMBER:2},SmallColorPicker.defaults={placement:{position:"absolute",top:"0",left:"0",parent:null,popup:!1},colors:{colorOld:null,colorNew:"#ff0000"},texts:{ok:"OK",cancel:"Cancel",switchModeToNum:"Show numbers",switchModeToCol:"Show color wheel"},behavior:{rotate:!0,hideOnSelect:!0,mode:SmallColorPicker.Mode.COLOR,switchMode:!0,animation:!0},events:{ok:null,cancel:null}},SmallColorPicker.CirclePicker=function(a){function l(){i(),s(),h(),w(),C()}function i(){io={redrawBug:-1!=navigator.userAgent.indexOf("Safari"),directCanvasRotate:-1==navigator.userAgent.indexOf("Firefox"),borderRadius:"borderRadius"in o.body.style,touch:"ontouchstart"in o}}function s(){if(!io.borderRadius)throw"Browser is not supported"}function n(){if(no.placement.popup&&uo){so&&(clearTimeout(so),so=null);var o=uo.position(),r=uo.outerWidth(),a=uo.outerHeight(),l=t(e).outerHeight(),i=t(e).width(),s=oo.el.outerWidth(),n=oo.el.outerHeight(),h=10,u=1,d=1,p=15,f={},v={},m={},C=o.top-t(e).scrollTop(),w=l-a-C,g=o.left-t(e).scrollLeft(),b=i-r-g;Math.max(C,w)>n+h&&Math.min(g,b)>s/2-r/2+h?(f.left=o.left+r/2-s/2,v.left=s/2-p,m.left=-p,C>w?(f.top=o.top-n-p+3,v.top=n-2,m.top=-p-u,c("top",p)):(f.top=o.top+a+d+p,v.top=-p,m.top=u,c("bottom",p))):(f.top=o.top+a/2-n/2,v.top=n/2-p,m.top=-p,g>b?(f.left=o.left-s-p+2,v.left=s-1,m.left=-p-u,c("left",p)):(f.left=o.left+r+d+p,v.left=-p,m.left=u,c("right",p))),oo.el.css(f),oo.arrow.css(v),oo.arrowInner.css(m)}}function c(o,e){var r,a=oo.arrow.css("color"),l=oo.arrowInner.css("color");switch(o){case"top":r="bottom";break;case"bottom":r="top";break;case"left":r="right";break;case"right":r="left"}t.each(["top","right","bottom","left"],function(t,i){var s="border-"+i,n=i==o?a:"transparent",c=i==r?"none":e+"px solid "+n;oo.arrow.css(s,c),n=i==o?l:"transparent",c=i==r?"none":e+"px solid "+n,oo.arrowInner.css(s,c)})}function h(){oo={},u(),no.placement.popup&&d(),p(),f(),v(),m()}function u(){oo.el=t("<div></div>").appendTo(no.placement.popup||!uo?o.body:uo).addClass("s-c-p").css({position:no.placement.position,left:no.placement.left,top:no.placement.top}),"static"==oo.el.css("position")&&oo.el.css("position","relative")}function d(){oo.el.css("position","absolute"),oo.el.addClass("s-c-p-popup"),oo.arrow=t("<div></div>").appendTo(oo.el).addClass("s-c-p-arrow"),oo.arrowInner=t("<div></div>").appendTo(oo.arrow).addClass("s-c-p-arrow-inner")}function p(){oo.circle=t("<div></div>").appendTo(oo.el).addClass("s-c-p-circle"),t("<div></div>").appendTo(oo.circle).addClass("s-c-p-circle-inner"),oo.circleMark=t("<div></div>").appendTo(oo.circle).addClass("s-c-p-circle-mark"),oo.square=t(io.directCanvasRotate?"<canvas></canvas>":"<img/>").appendTo(oo.el).addClass("s-c-p-square"),oo.squareMark=t("<div></div>").appendTo(oo.el).addClass("s-c-p-square-mark"),ro=io.directCanvasRotate?oo.square[0]:t("<canvas></canvas>").appendTo(oo.el).hide()[0];var o=Math.min(oo.square.width(),100);t(ro).attr({width:o,height:o})}function f(){var o=t("<div></div>").appendTo(oo.el).addClass("s-c-p-color-texts");t.each({rgb:["r","g","b"],hsv:["h","s","b"]},function(e,r){var a=t("<div></div>").appendTo(o).addClass("s-c-p-column");t.each(r,function(o,r){var l=t("<div></div>").appendTo(a).addClass("s-c-p-row");t("<label></label>").appendTo(l).attr("for","s-c-p-txt-"+fo+"-"+e+"-"+r).text(r.toUpperCase()+":");var i="rgb"==e?255:"h"==r?360:100;t("<input/>").attr({id:"s-c-p-txt-"+fo+"-"+e+"-"+r,type:"text",maxLength:3,autocomplete:"off","data-prop":e,"data-col":r,"data-min":0,"data-max":i}).appendTo(l)})});var e=t("<div></div>").appendTo(o).addClass("s-c-p-row-full");t("<input/>").attr({id:"s-c-p-txt-"+fo+"-hex",type:"text",maxLength:24,autocomplete:"off"}).appendTo(e)}function v(){oo.colorOld=t("<div></div>").appendTo(oo.el).addClass("s-c-p-color s-c-p-color-old"),oo.colorNew=t("<div></div>").appendTo(oo.el).addClass("s-c-p-color s-c-p-color-new"),oo.sampleOld=t("<div></div>").appendTo(oo.el).addClass("s-c-p-sample s-c-p-sample-old").text(no.texts.cancel),oo.sampleNew=t("<div></div>").appendTo(oo.el).addClass("s-c-p-sample s-c-p-sample-new").text(no.texts.ok)}function m(){no.behavior.switchMode&&(oo.modeSwitch=t("<div></div>").appendTo(oo.el).addClass("s-c-p-mode-switch"))}function C(){eo={globalSelectionMode:t(o.body).css("user-select"),squareWidth:oo.square.width(),circleWidth:oo.circle.width(),elWidth:oo.el.width()}}function w(){oo.circle.on(io.touch?"touchstart":"mousedown",g),oo.square.on("selectstart",function(t){t.preventDefault()}).on(io.touch?"touchstart":"mousedown",b),oo.sampleNew.click(function(){no.behavior.hideOnSelect&&(to(),ho=co),no.events.ok&&no.events.ok(co.toHex())}),oo.sampleOld.click(function(){no.behavior.hideOnSelect&&to(),no.events.cancel&&no.events.cancel(ho.toHex())}),no.placement.popup&&uo&&t(e).resize(T),oo.modeSwitch&&oo.modeSwitch.click(function(){X()}),t(".s-c-p-row input",oo.el).focus(function(){t(this).data("oldval",+t(this).val())}).blur(function(o){var e=t(this).val(),r=V(e,+t(this).data("min"),+t(this).data("max"));e!==""+r&&(t(this).val(isNaN(r)?+t(this).data("oldval"):r),M(o,!0))}).keyup(function(t){M(t,!1)}),t("#s-c-p-txt-"+fo+"-hex",oo.el).focus(function(){t(this).data("oldval",t(this).val())}).blur(function(o){var e=t(this).val(),r=j(e);e!==r&&(t(this).val(r||t(this).data("oldval")),P(o,!0))}).keyup(function(t){P(t,!1)})}function g(e){e.preventDefault(),y(U(e),$(e)),H(!1),t(o).on(io.touch?"touchmove":"mousemove",k).one(io.touch?"touchend":"mouseup",x)}function b(e){e.preventDefault(),D(U(e),$(e)),H(!1),t(o).on(io.touch?"touchmove":"mousemove",S).one(io.touch?"touchend":"mouseup",x)}function k(t){t.preventDefault(),y(U(t),$(t))}function S(t){t.preventDefault(),D(U(t),$(t))}function x(){H(!0),t(o).off(io.touch?"touchmove":"mousemove",k).off(io.touch?"touchmove":"mousemove",S)}function T(){Z()&&no.placement.popup&&!so&&(so=setTimeout(n,100))}function M(o,e){var r=t(o.target),a=V(r.val(),+r.data("min"),+r.data("max"));if(isNaN(a))a=r.data("oldval");else if(!e&&a==r.data("oldval"))return;var l=r.data("prop"),i=r.data("col"),s=new SmallColorPicker.Color;switch(l){case"rgb":var n=F();n[i]=a,s.setRgb(n.r,n.g,n.b);break;case"hsv":var c=G();c["b"==i?"v":i]=a,s.setHsv(c.h,c.s,c.v)}co.val!=s.val&&(co=s,J(),"rgb"==l?K():z(),I())}function P(o,e){var r=t(o.target),a=j(r.val());if(a){if(!e&&a==r.data("oldval"))return}else a=r.data("oldval");var l=new SmallColorPicker.Color(a);co.val!=l.val&&(co=l,K(),z(),I())}function y(t,o){var e=oo.circle.offset(),r=R(t-e.left,o-e.top);co.hue(r);var a=(new SmallColorPicker.Color).setHsv(r,100,100);N(a.toHex()),I(),W(r),A()}function D(t,o){if(!mo.fw){var e=oo.circle.offset(),r=eo.circleWidth/2,a=eo.squareWidth/2;mo.fw=new SmallColorPicker.Transforms.Translate2D(-e.left-r,-e.top-r),no.behavior.rotate&&mo.fw.chain(new SmallColorPicker.Transforms.Rotate2D(-vo)),mo.fw.chain(new SmallColorPicker.Transforms.Translate2D(a,a))}var l=mo.fw.apply([t,o]);t=Math.max(0,Math.min(eo.squareWidth-1,l[0])),o=Math.max(0,Math.min(eo.squareWidth-1,l[1])),co=q(t,o),I(),A(t,o)}function H(e){t(o.body).css({webkitUserSelect:e?eo.globalSelectionMode:"none"})}function R(t,o){var e=eo.circleWidth;t-=e/2,o-=e/2;var r=Math.atan2(t,o);return 180-360*(r/Math.PI/2)}function q(t,o){var e=ro.getContext("2d"),r=e.getImageData(t,o,1,1).data;return(new SmallColorPicker.Color).setRgb(r[0],r[1],r[2])}function O(){oo.colorOld[0].innerHTML=null===ho?"":ho.toHex(),L(oo.sampleOld,null===ho?new SmallColorPicker.Color(10066329):ho,"old")}function I(){oo.colorNew[0].innerHTML=co.toHex()+"<br/>",L(oo.sampleNew,co,"new")}function L(t,o,e){var r=o.toHsv().v;t[0].style.backgroundColor=o.toHex(),eo.colorSamplesLight||(eo.colorSamplesLight={}),r>80?eo.colorSamplesLight[e]!==!0&&(eo.colorSamplesLight[e]=!0,t.addClass("s-c-p-light")):eo.colorSamplesLight[e]!==!1&&(eo.colorSamplesLight[e]=!1,t.removeClass("s-c-p-light"))}function N(t){var o=new SmallColorPicker.Color(t),e=o.hue(),r=ro.width,a=ro.getContext("2d");a.clearRect(0,0,r,r);for(var l=a.createImageData(r,r),i=l.data,s=0;r>s;s++)for(var n=0;r>n;n++){o.setHsv(e,Math.round(100*s/(r-1)),Math.round(100*n/(r-1)));var c=4*((r-n-1)*r+s);i[c]=o.r(),i[c+1]=o.g(),i[c+2]=o.b(),i[c+3]=255}a.putImageData(l,0,0),io.directCanvasRotate||(oo.square[0].src=ro.toDataURL())}function W(t){var o=t===r?co.hue():t,e=o/180*Math.PI,a=eo.circleWidth,l=.025,i={transform:"rotate("+e+"rad)",left:a/2-a*Math.sin(-e+l)/2,top:a/2-a*Math.cos(-e+l)/2};oo.circleMark.css(i),vo=e-Math.PI/4,mo={},no.behavior.rotate&&oo.square.css({transform:"rotate("+vo+"rad)"})}function A(t,o){var e=eo.squareWidth,a=co.toHsv(),l=0,i=0;if(t!==r&&(ao=t),o!==r&&(lo=o),ao!==r&&lo!==r?(l+=ao,i+=lo):(l+=a.s*e/100,i+=e-a.v*e/100,l=Math.max(0,Math.min(e-1,l)),i=Math.max(0,Math.min(e-1,i))),!mo.rev){var s=eo.squareWidth/2,n=eo.elWidth/2;mo.rev=new SmallColorPicker.Transforms.Translate2D(-s,-s),no.behavior.rotate&&mo.rev.chain(new SmallColorPicker.Transforms.Rotate2D(vo)),mo.rev.chain(new SmallColorPicker.Transforms.Translate2D(n-3,n-3))}var c=mo.rev.apply([l,i]),h=oo.squareMark[0].style;h.left=c[0]+"px",h.top=c[1]+"px",B()}function B(){var t=co.getPerceivedBrightness()>125;if(eo.isSqMaskLight!==t){eo.isSqMaskLight=t;var o=(new SmallColorPicker.Color).setHsv(0,0,t?40:90);oo.squareMark[0].style.borderColor=o.toHex(),E(oo.squareMark[0])}}function U(t){return t.pageX!==r?t.pageX:t.originalEvent.pageX}function $(t){return t.pageY!==r?t.pageY:t.originalEvent.pageY}function E(t){io.redrawBug&&(t.style.display="inline-block",t.offsetHeight,t.style.display="block")}function V(o,e,r){o=t.trim(o);var a;if(/^\d*$/g.test(o))a=+o;else{if(!/^[\da-f]+$/gi.test(o))return 0/0;a=parseInt(o,16)}return Math.max(e,Math.min(r,a))}function j(o){try{return new SmallColorPicker.Color(o).toHex()}catch(e){if(/^[a-z]+$/gi.test(o)){o=o.toLowerCase();var r=t("<div style='color:black'></div>").css("color",o).appendTo("body"),a=r.css("color");r.remove();try{return a=new SmallColorPicker.Color(a),a.val||"black"==o?a.toHex():null}catch(l){return null}}return null}}function Q(){W(),A()}function X(){po=po==SmallColorPicker.Mode.COLOR?SmallColorPicker.Mode.NUMBER:SmallColorPicker.Mode.COLOR,Y()}function Y(){po==SmallColorPicker.Mode.NUMBER?(oo.el.addClass("s-c-p-mode-num"),oo.squareMark.hide(),oo.modeSwitch&&oo.modeSwitch.attr("title",no.texts.switchModeToCol),z(),K(),J()):(oo.el.removeClass("s-c-p-mode-num"),oo.squareMark.show(),oo.modeSwitch&&oo.modeSwitch.attr("title",no.texts.switchModeToNum),N(co.toHex()),Q())}function z(){t.each(co.toRgb(),function(o,e){t("#s-c-p-txt-"+fo+"-rgb-"+o,oo.el).val(e)})}function F(){var o={};return t.each(["r","g","b"],function(e,r){o[r]=~~t("#s-c-p-txt-"+fo+"-rgb-"+r,oo.el).val()}),o}function K(){t.each(co.toHsv(),function(o,e){t("#s-c-p-txt-"+fo+"-hsv-"+("v"===o?"b":o),oo.el).val(Math.round(e))})}function G(){var o={};return t.each(["h","s","v"],function(e,r){o[r]=~~t("#s-c-p-txt-"+fo+"-hsv-"+("v"===r?"b":r),oo.el).val()}),o}function J(){t("#s-c-p-txt-"+fo+"-hex",oo.el).val(co.toHex())}function Z(){return oo&&oo.el&&oo.el.is(":visible")}function _(t){oo||l(),O(),I(),n(),Y(),t===r&&(t=no.behavior.animation),t?oo.el.fadeIn(200):oo.el.show()}function to(t){t===r&&(t=no.behavior.animation),t?oo.el.fadeOut(200):oo.el.show()}var oo,eo,ro,ao,lo,io,so,no=t.extend(!0,{},SmallColorPicker.defaults,a),co=new SmallColorPicker.Color(no.colors.colorNew),ho=new SmallColorPicker.Color(no.colors.colorOld),uo=no.placement.parent?t(no.placement.parent):null,po=no.behavior.mode,fo=~~(1e4*Math.random()),vo=0,mo={};this.toggle=function(){this.isVisible()?this.hide():this.show()},this.isVisible=Z,this.show=_,this.hide=to,this.switchMode=X,this.setColors=function(t,o){t!==r&&(co=new SmallColorPicker.Color(t)),o!==r&&(ho=null===o?null:new SmallColorPicker.Color(o)),this.isVisible()&&this.show()},this.parent=function(o){return o&&(this.isVisible()?(this.hide(!1),uo=t(o),this.show(!1)):uo=t(o)),uo}}})(window.jQuery,document,window),function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Color=function(t){if(this.val=0,"number"==typeof t)this.val=t;else if("string"==typeof t)if("#"===t.charAt(0))if(/^#[\da-f]{6}$/gi.test(t))this.val=parseInt(t.substr(1),16);else{if(!/^#[\da-f]{3}$/gi.test(t))throw"Invalid color: "+t;this.val=parseInt(t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3),16)}else{var o=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*([\d\.]+))?\)$/g.exec(t);if(!o)throw"Invalid color: "+t;this.setRgb(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}},SmallColorPicker.Color.prototype={constructor:SmallColorPicker.Color,r:function(t){return t!==r?(this.val=65535&this.val|t<<16,t):255&this.val>>16},g:function(t){return t!==r?(this.val=16711935&this.val|t<<8,t):255&this.val>>8},b:function(t){return t!==r?(this.val=16776960&this.val|t,t):255&this.val},toHex:function(){var t=("00000"+this.val.toString(16)).substr(-6);return"#"+t},toRgb:function(){return{r:this.r(),g:this.g(),b:this.b()}},toRgbStr:function(){return"rgb("+this.r()+","+this.g()+","+this.b()+")"},setRgb:function(t,o,e){return this.r(t),this.g(o),this.b(e),this},toHsv:function(){var t,o,e,r=this.r(),a=this.g(),l=this.b(),i=Math.min(r,a,l),s=Math.max(r,a,l),n=s-i;if(e=Math.floor(100*(s/255)),0==s)return{h:0,s:0,v:0};o=Math.floor(100*(n/s));var c=0==n?1:n;return t=r==s?(a-l)/c:a==s?2+(l-r)/c:4+(r-a)/c,t=Math.floor(60*t),0>t&&(t+=360),{h:t,s:o,v:e}},setHsv:function(t,o,e){if(t/=360,o/=100,e/=100,0==o){var r=Math.round(255*e);return this.r(r),this.g(r),this.b(r),this}var a,l,i,s=6*t,n=Math.floor(s),c=e*(1-o),h=e*(1-o*(s-n)),u=e*(1-o*(1-(s-n)));return 0==n?(a=e,l=u,i=c):1==n?(a=h,l=e,i=c):2==n?(a=c,l=e,i=u):3==n?(a=c,l=h,i=e):4==n?(a=u,l=c,i=e):(a=e,l=c,i=h),this.r(Math.round(255*a)),this.g(Math.round(255*l)),this.b(Math.round(255*i)),this},hue:function(t){if(t!==r){var o=this.toHsv();return this.setHsv(t,o.s,o.v),this}return this.toHsv().h},getPerceivedBrightness:function(){var t=this.toRgb();return Math.sqrt(.241*t.r*t.r+.691*t.g*t.g+.068*t.b*t.b)}}}(window.jQuery,document,window),function(t,o,e){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Transforms={},SmallColorPicker.Transforms.Transform2D=function(t){this.matrix=t,this.next=null},SmallColorPicker.Transforms.Transform2D.prototype={constructor:SmallColorPicker.Transforms.Transform2D,apply:function(t){var o=[this.matrix[0][0]*t[0]+this.matrix[0][1]*t[1]+this.matrix[0][2],this.matrix[1][0]*t[0]+this.matrix[1][1]*t[1]+this.matrix[1][2]];return this.next?this.next.apply(o):o},chain:function(t){return this.next?this.next.chain(t):this.next=t,this}},SmallColorPicker.Transforms.Translate2D=function(t,o){SmallColorPicker.Transforms.Transform2D.call(this,[[1,0,t],[0,1,o]])},SmallColorPicker.Transforms.Translate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Translate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D,SmallColorPicker.Transforms.Rotate2D=function(t){var o=Math.cos(t),e=Math.sin(t);SmallColorPicker.Transforms.Transform2D.call(this,[[o,-e,0],[e,o,0]])},SmallColorPicker.Transforms.Rotate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Rotate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D}(window.jQuery,document,window);