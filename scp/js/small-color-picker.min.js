/*! SmallColorPicker v1.3.0  | (c) 2017 Antelle | https://github.com/antelle/small-color-picker/blob/master/MIT-LICENSE.txt */
!function(a,b,c,d){"use strict";function e(b){return a(b).hasClass("color-btn")}function f(b){return e(b)?a(b).find("b:first").css("background-color"):a(b).data(i)}function g(b,c){if(e(b)){a(b).find("b").css("background-color",c).end();var d=a(b).contents().last(),f=d.text();f.length&&"#"==f.charAt(0)&&(d.remove(),a(b).append(c))}a(b).data(i,c)}c.SmallColorPicker=c.SmallColorPicker||{};var h="scp",i="scp-col";SmallColorPicker.Proxy=function(a){this.els=a},SmallColorPicker.Proxy.prototype=function(){function b(b){return a(b).data("scp")}function c(c,d){var e=[];c.each(function(){var c=b(this);if(!c)return!0;var f=!1;return a.each(e,function(a,b){return b===c?(f=!0,!1):!0}),f?!0:(e.push(c),d.call(c))})}return{constructor:SmallColorPicker.Proxy,show:function(){return c(this.els,function(){this.show()}),this},hide:function(){return c(this.els,function(){this.hide()}),this},toggle:function(a){return c(this.els,function(){this.toggle(a)}),this},isVisible:function(){var a=!1;return c(this.els,function(){return this.isVisible()?(a=!0,!1):(a=!1,!0)}),a},switchMode:function(a){return c(this.els,function(){this.switchMode(a)}),this},setColors:function(a,b){return c(this.els,function(){this.setColors(a,b)}),this},parent:function(a){return this.els.length?b(this.els[0]).parent(a):null},destroy:function(){return c(this.els,function(){this.destroy()}),this.els.each(function(){a(this).removeData(h)}),this}}}(),a.fn.smallColorPicker=function(b){if(b===d||!this.length)return new SmallColorPicker.Proxy(this);if(!b.placement||b.placement.popup){var c=a.extend(!0,{},b,{placement:{parent:this[0]}}),e=new SmallColorPicker.CirclePicker(c);return a(this).data(h,e),this.on({click:function(){if(e.parent()[0]===this&&e.isVisible())e.hide();else{var a=f(this);e.parent(this),e.setColors(a,a),e.switchMode(SmallColorPicker.Mode.COLOR),e.show()}},scp_ok:function(a,b){g(this,b)}}),this}return this.each(function(){var c=a.extend(!0,{},b,{placement:{parent:this}}),d=new SmallColorPicker.CirclePicker(c);a(this).data(h,d)})}}(window.jQuery,document,window),function(a,b,c,d){"use strict";c.SmallColorPicker=c.SmallColorPicker||{},SmallColorPicker.Mode={COLOR:1,NUMBER:2},SmallColorPicker.defaults={placement:{position:"absolute",top:"0",left:"0",parent:null,popup:!0},colors:{colorOld:null,colorNew:"#ff0000"},texts:{ok:"OK",cancel:"Cancel",switchModeToNum:"Show numbers",switchModeToCol:"Show color wheel"},behavior:{rotate:!0,hideOnSelect:!0,mode:SmallColorPicker.Mode.COLOR,switchMode:!0,animation:!0}},SmallColorPicker.CirclePicker=function(e){function f(){g(),i(),j(),k(),v(),r()}function g(){W(qa)}function h(){s()}function i(){ka={redrawBug:-1!=navigator.userAgent.indexOf("Safari"),directCanvasRotate:-1==navigator.userAgent.indexOf("Firefox"),borderRadius:"borderRadius"in b.body.style,touch:"ontouchstart"in b}}function j(){if(!ka.borderRadius)throw"Browser is not supported"}function k(){fa={},l(),na.placement.popup&&m(),n(),o(),p(),q()}function l(){fa.el=a("<div></div>").appendTo(na.placement.popup?b.body:qa).addClass("s-c-p").css({position:na.placement.position,left:na.placement.left,top:na.placement.top,display:"none"}),"static"==fa.el.css("position")&&fa.el.css("position","relative")}function m(){fa.el.css("position","absolute"),fa.el.addClass("s-c-p-popup"),fa.arrow=a("<div></div>").appendTo(fa.el).addClass("s-c-p-arrow"),fa.arrowInner=a("<div></div>").appendTo(fa.arrow).addClass("s-c-p-arrow-inner")}function n(){fa.circle=a("<div></div>").appendTo(fa.el).addClass("s-c-p-circle"),a("<div></div>").appendTo(fa.circle).addClass("s-c-p-circle-inner"),fa.circleMark=a("<div></div>").appendTo(fa.circle).addClass("s-c-p-circle-mark"),fa.square=a(ka.directCanvasRotate?"<canvas></canvas>":"<img/>").appendTo(fa.el).addClass("s-c-p-square"),fa.squareMark=a("<div></div>").appendTo(fa.el).addClass("s-c-p-square-mark"),ha=ka.directCanvasRotate?fa.square[0]:a("<canvas></canvas>").appendTo(fa.el).hide()[0];var b=Math.min(fa.square.width(),100);a(ha).attr({width:b,height:b})}function o(){var b=a("<div></div>").appendTo(fa.el).addClass("s-c-p-color-texts");a.each({rgb:["r","g","b"],hsv:["h","s","b"]},function(c,d){var e=a("<div></div>").appendTo(b).addClass("s-c-p-column");a.each(d,function(b,d){var f=a("<div></div>").appendTo(e).addClass("s-c-p-row");a("<label></label>").appendTo(f).attr("for","s-c-p-txt-"+sa+"-"+c+"-"+d).text(d.toUpperCase()+":");var g="rgb"==c?255:"h"==d?360:100;a("<input/>").attr({id:"s-c-p-txt-"+sa+"-"+c+"-"+d,type:"text",maxLength:3,autocomplete:"off","data-prop":c,"data-col":d,"data-min":0,"data-max":g}).appendTo(f)})});var c=a("<div></div>").appendTo(b).addClass("s-c-p-row-full");a("<input/>").attr({id:"s-c-p-txt-"+sa+"-hex",type:"text",maxLength:24,autocomplete:"off"}).appendTo(c)}function p(){fa.colorOld=a("<div></div>").appendTo(fa.el).addClass("s-c-p-color s-c-p-color-old"),fa.colorNew=a("<div></div>").appendTo(fa.el).addClass("s-c-p-color s-c-p-color-new"),fa.sampleOld=a("<div></div>").appendTo(fa.el).addClass("s-c-p-sample s-c-p-sample-old").text(na.texts.cancel),fa.sampleNew=a("<div></div>").appendTo(fa.el).addClass("s-c-p-sample s-c-p-sample-new").text(na.texts.ok)}function q(){na.behavior.switchMode&&(fa.modeSwitch=a("<div></div>").appendTo(fa.el).addClass("s-c-p-mode-switch"))}function r(){ga={globalSelectionMode:a(b.body).css("user-select"),squareWidth:fa.square.width(),circleWidth:fa.circle.width(),elWidth:fa.el.width()}}function s(){fa&&fa.el&&fa.el.remove()}function t(){if(na.placement.popup){la&&(clearTimeout(la),la=null);var b=qa.offset(),d=qa.outerWidth(),e=qa.outerHeight(),f=a(c).outerHeight(),g=a(c).width(),h=fa.el.outerWidth(),i=fa.el.outerHeight(),j=10,k=1,l=1,m=15,n={},o={},p={},q=b.top-a(c).scrollTop(),r=f-e-q,s=b.left-a(c).scrollLeft(),t=g-d-s;Math.max(q,r)>i+j&&Math.min(s,t)>h/2-d/2+j?(n.left=b.left+d/2-h/2,o.left=h/2-m,p.left=-m,q>r?(n.top=b.top-i-m+3,o.top=i-2,p.top=-m-k,u("top",m)):(n.top=b.top+e+l+m,o.top=-m,p.top=k,u("bottom",m))):(n.top=b.top+e/2-i/2,o.top=i/2-m,p.top=-m,s>t?(n.left=b.left-h-m+2,o.left=h-1,p.left=-m-k,u("left",m)):(n.left=b.left+d+l+m,o.left=-m,p.left=k,u("right",m))),fa.el.css(n),fa.arrow.css(o),fa.arrowInner.css(p)}}function u(b,c){var d,e=fa.arrow.css("color"),f=fa.arrowInner.css("color");switch(b){case"top":d="bottom";break;case"bottom":d="top";break;case"left":d="right";break;case"right":d="left"}a.each(["top","right","bottom","left"],function(a,g){var h="border-"+g,i=g==b?e:"transparent",j=g==d?"none":c+"px solid "+i;fa.arrow.css(h,j),i=g==b?f:"transparent",j=g==d?"none":c+"px solid "+i,fa.arrowInner.css(h,j)})}function v(){fa.circle.on(ka.touch?"touchstart":"mousedown",w),fa.square.on("selectstart",function(a){a.preventDefault()}).on(ka.touch?"touchstart":"mousedown",x),fa.sampleNew.click(function(){na.behavior.hideOnSelect&&(ea(),pa=oa),qa.trigger("scp_ok",[oa.toHex(),ma])}),fa.sampleOld.click(function(){na.behavior.hideOnSelect&&ea(),qa.trigger("scp_cancel",[oa.toHex(),ma])}),na.placement.popup&&a(c).resize(B),fa.modeSwitch&&fa.modeSwitch.click(function(){X()}),a(".s-c-p-row input",fa.el).focus(function(){a(this).data("oldval",+a(this).val())}).blur(function(b){var c=a(this).val(),d=T(c,+a(this).data("min"),+a(this).data("max"));c!==d.toString()&&(a(this).val(isNaN(d)?+a(this).data("oldval"):d),C(b,!0))}).keyup(function(a){C(a,!1)}),a("#s-c-p-txt-"+sa+"-hex",fa.el).focus(function(){a(this).data("oldval",a(this).val())}).blur(function(b){var c=a(this).val(),d=U(c);c!==d&&(a(this).val(d||a(this).data("oldval")),D(b,!0))}).keyup(function(b){13===b.keyCode?(b.preventDefault(),a(this).blur(),fa.sampleNew.click()):D(b,!1)})}function w(c){c.preventDefault(),E(Q(c),R(c)),V(!1),a(b).on(ka.touch?"touchmove":"mousemove",y).one(ka.touch?"touchend":"mouseup",A)}function x(c){c.preventDefault(),F(Q(c),R(c)),V(!1),a(b).on(ka.touch?"touchmove":"mousemove",z).one(ka.touch?"touchend":"mouseup",A)}function y(a){a.preventDefault(),E(Q(a),R(a))}function z(a){a.preventDefault(),F(Q(a),R(a))}function A(){V(!0),a(b).off(ka.touch?"touchmove":"mousemove",y).off(ka.touch?"touchmove":"mousemove",z)}function B(){ca()&&na.placement.popup&&!la&&(la=setTimeout(t,100))}function C(b,c){var d=a(b.target),e=T(d.val(),+d.data("min"),+d.data("max"));if(isNaN(e))e=d.data("oldval");else if(!c&&e==d.data("oldval"))return;var f=d.data("prop"),g=d.data("col"),h=new SmallColorPicker.Color;switch(f){case"rgb":var i=$();i[g]=e,h.setRgb(i.r,i.g,i.b);break;case"hsv":var j=aa();j["b"==g?"v":g]=e,h.setHsv(j.h,j.s,j.v)}oa.val!=h.val&&(oa=h,ba(),"rgb"==f?_():Z(),J())}function D(b,c){var d=a(b.target),e=U(d.val());if(e){if(!c&&e==d.data("oldval"))return}else e=d.data("oldval");var f=new SmallColorPicker.Color(e);oa.val!=f.val&&(oa=f,_(),Z(),J())}function E(a,b){var c=fa.circle.offset(),d=G(a-c.left,b-c.top);oa.hue(d);var e=(new SmallColorPicker.Color).setHsv(d,100,100);L(e.toHex()),J(),M(d),N()}function F(a,b){if(!ua.fw){var c=fa.circle.offset(),d=ga.circleWidth/2,e=ga.squareWidth/2;ua.fw=new SmallColorPicker.Transforms.Translate2D(-c.left-d,-c.top-d),na.behavior.rotate&&ua.fw.chain(new SmallColorPicker.Transforms.Rotate2D(-ta)),ua.fw.chain(new SmallColorPicker.Transforms.Translate2D(e,e))}var f=ua.fw.apply([a,b]);a=Math.max(0,Math.min(ga.squareWidth-1,f[0])),b=Math.max(0,Math.min(ga.squareWidth-1,f[1])),oa=H(a,b),J(),N(a,b)}function G(a,b){var c=ga.circleWidth;a-=c/2,b-=c/2;var d=Math.atan2(a,b);return 180-d/Math.PI/2*360}function H(a,b){var c=ha.getContext("2d"),d=c.getImageData(a,b,1,1).data;return(new SmallColorPicker.Color).setRgb(d[0],d[1],d[2])}function I(){fa.colorOld[0].innerHTML=null===pa?"":pa.toHex(),K(fa.sampleOld,null===pa?new SmallColorPicker.Color(10066329):pa,"old")}function J(){fa.colorNew[0].innerHTML=oa.toHex()+"<br/>",K(fa.sampleNew,oa,"new")}function K(a,b,c){var d=b.toHsv().v;a[0].style.backgroundColor=b.toHex(),ga.colorSamplesLight||(ga.colorSamplesLight={}),d>80?ga.colorSamplesLight[c]!==!0&&(ga.colorSamplesLight[c]=!0,a.addClass("s-c-p-light")):ga.colorSamplesLight[c]!==!1&&(ga.colorSamplesLight[c]=!1,a.removeClass("s-c-p-light"))}function L(a){var b=new SmallColorPicker.Color(a),c=b.hue(),d=ha.width,e=ha.getContext("2d");e.clearRect(0,0,d,d);for(var f=e.createImageData(d,d),g=f.data,h=0;d>h;h++)for(var i=0;d>i;i++){b.setHsv(c,Math.round(100*h/(d-1)),Math.round(100*i/(d-1)));var j=4*((d-i-1)*d+h);g[j]=b.r(),g[j+1]=b.g(),g[j+2]=b.b(),g[j+3]=255}e.putImageData(f,0,0),ka.directCanvasRotate||(fa.square[0].src=ha.toDataURL())}function M(a){var b=a===d?oa.hue():a,c=b/180*Math.PI,e=ga.circleWidth,f=.025,g={transform:"rotate("+c+"rad)",left:e/2-e*Math.sin(-c+f)/2,top:e/2-e*Math.cos(-c+f)/2};fa.circleMark.css(g),ta=c-Math.PI/4,ua={},na.behavior.rotate&&fa.square.css({transform:"rotate("+ta+"rad)"})}function N(a,b){var c=ga.squareWidth,e=oa.toHsv(),f=0,g=0;if(a!==d&&(ia=a),b!==d&&(ja=b),ia!==d&&ja!==d?(f+=ia,g+=ja):(f+=e.s*c/100,g+=c-e.v*c/100,f=Math.max(0,Math.min(c-1,f)),g=Math.max(0,Math.min(c-1,g))),!ua.rev){var h=ga.squareWidth/2,i=ga.elWidth/2;ua.rev=new SmallColorPicker.Transforms.Translate2D(-h,-h),na.behavior.rotate&&ua.rev.chain(new SmallColorPicker.Transforms.Rotate2D(ta)),ua.rev.chain(new SmallColorPicker.Transforms.Translate2D(i-3,i-3))}var j=ua.rev.apply([f,g]),k=fa.squareMark[0].style;k.left=j[0]+"px",k.top=j[1]+"px",O()}function O(){var a=oa.getPerceivedBrightness()>125;if(ga.isSqMaskLight!==a){ga.isSqMaskLight=a;var b=(new SmallColorPicker.Color).setHsv(0,0,a?40:90);fa.squareMark[0].style.borderColor=b.toHex(),S(fa.squareMark[0])}}function P(){M(),N()}function Q(a){return a.pageX!==d?a.pageX:a.originalEvent.pageX}function R(a){return a.pageY!==d?a.pageY:a.originalEvent.pageY}function S(a){ka.redrawBug&&(a.style.display="inline-block",a.offsetHeight,a.style.display="block")}function T(b,c,d){b=a.trim(b);var e;if(/^\d*$/g.test(b))e=+b;else{if(!/^[\da-f]+$/gi.test(b))return NaN;e=parseInt(b,16)}return Math.max(c,Math.min(d,e))}function U(b){try{return new SmallColorPicker.Color(b).toHex()}catch(c){if(/^[a-z]+$/gi.test(b)){b=b.toLowerCase();var d=a("<div style='color:black'></div>").css("color",b).appendTo("body"),e=d.css("color");d.remove();try{return e=new SmallColorPicker.Color(e),e.val||"black"==b?e.toHex():null}catch(f){return null}}return null}}function V(c){a(b.body).css({webkitUserSelect:c?ga.globalSelectionMode:"none"})}function W(a){if(1!=a.length)throw"Color picker should have exactly one parent"}function X(a){var b=a!==d?a:ra==SmallColorPicker.Mode.COLOR?SmallColorPicker.Mode.NUMBER:SmallColorPicker.Mode.COLOR;ra!==b&&(ra=b,Y())}function Y(){ra==SmallColorPicker.Mode.NUMBER?(fa.el.addClass("s-c-p-mode-num"),fa.squareMark.hide(),fa.modeSwitch&&fa.modeSwitch.attr("title",na.texts.switchModeToCol),Z(),_(),ba(),a("#s-c-p-txt-"+sa+"-hex",fa.el).focus()):(fa.el.removeClass("s-c-p-mode-num"),fa.squareMark.show(),fa.modeSwitch&&fa.modeSwitch.attr("title",na.texts.switchModeToNum),L(oa.toHex()),P())}function Z(){a.each(oa.toRgb(),function(b,c){a("#s-c-p-txt-"+sa+"-rgb-"+b,fa.el).val(c)})}function $(){var b={};return a.each(["r","g","b"],function(c,d){b[d]=~~a("#s-c-p-txt-"+sa+"-rgb-"+d,fa.el).val()}),b}function _(){a.each(oa.toHsv(),function(b,c){a("#s-c-p-txt-"+sa+"-hsv-"+("v"===b?"b":b),fa.el).val(Math.round(c))})}function aa(){var b={};return a.each(["h","s","v"],function(c,d){b[d]=~~a("#s-c-p-txt-"+sa+"-hsv-"+("v"===d?"b":d),fa.el).val()}),b}function ba(){a("#s-c-p-txt-"+sa+"-hex",fa.el).val(oa.toHex())}function ca(){return fa&&fa.el&&fa.el.is(":visible")}function da(a){var b=ca();fa.el.stop().css("display","block"),I(),J(),t(),Y(),b||(a===d&&(a=na.behavior.animation),a&&fa.el.fadeIn(200),qa.trigger("scp_show",[ma]))}function ea(a){ca()&&(fa.el.stop(),a===d&&(a=na.behavior.animation),a?fa.el.fadeOut(200):fa.el.hide(),qa.trigger("scp_hide",[ma]))}var fa,ga,ha,ia,ja,ka,la,ma=this,na=a.extend(!0,{},SmallColorPicker.defaults,e),oa=new SmallColorPicker.Color(na.colors.colorNew),pa=new SmallColorPicker.Color(na.colors.colorOld),qa=a(na.placement.parent?na.placement.parent:b.body),ra=na.behavior.mode,sa=~~(1e4*Math.random()),ta=0,ua={};f(),na.placement.popup||da(),this.destroy=h,this.setColors=function(a,b){a!==d&&(oa=new SmallColorPicker.Color(a)),b!==d&&(pa=null===b?null:new SmallColorPicker.Color(b)),this.isVisible()&&this.show()},this.switchMode=X,this.toggle=function(a){a===d&&(a=!this.isVisible()),a?this.show():this.hide()},this.isVisible=ca,this.show=da,this.hide=ea,this.parent=function(b){return b&&(W(a(b)),this.isVisible()?(this.hide(!1),qa=a(b),this.show(!1)):qa=a(b)),qa}}}(window.jQuery,document,window),function(a,b,c,d){"use strict";c.SmallColorPicker=c.SmallColorPicker||{},SmallColorPicker.Color=function(a){if(this.val=0,"number"==typeof a)this.val=a;else if("string"==typeof a)if("#"===a.charAt(0))if(/^#[\da-f]{6}$/gi.test(a))this.val=parseInt(a.substr(1),16);else{if(!/^#[\da-f]{3}$/gi.test(a))throw"Invalid color: "+a;this.val=parseInt(a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3),16)}else{var b=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*([\d\.]+))?\)$/g.exec(a);if(!b)throw"Invalid color: "+a;this.setRgb(parseInt(b[1]),parseInt(b[2]),parseInt(b[3]))}},SmallColorPicker.Color.prototype={constructor:SmallColorPicker.Color,r:function(a){return a!==d?(this.val=65535&this.val|a<<16,a):this.val>>16&255},g:function(a){return a!==d?(this.val=16711935&this.val|a<<8,a):this.val>>8&255},b:function(a){return a!==d?(this.val=16776960&this.val|a,a):255&this.val},toHex:function(){var a=("00000"+this.val.toString(16)).substr(-6);return"#"+a},toRgb:function(){return{r:this.r(),g:this.g(),b:this.b()}},toRgbStr:function(){return"rgb("+this.r()+","+this.g()+","+this.b()+")"},setRgb:function(a,b,c){return this.r(a),this.g(b),this.b(c),this},toHsv:function(){var a,b,c,d=this.r(),e=this.g(),f=this.b(),g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g;if(c=Math.floor(h/255*100),0==h)return{h:0,s:0,v:0};b=Math.floor(i/h*100);var j=0==i?1:i;return a=d==h?(e-f)/j:e==h?2+(f-d)/j:4+(d-e)/j,a=Math.floor(60*a),0>a&&(a+=360),{h:a,s:b,v:c}},setHsv:function(a,b,c){if(a/=360,b/=100,c/=100,0==b){var d=Math.round(255*c);return this.r(d),this.g(d),this.b(d),this}var e,f,g,h=6*a,i=Math.floor(h),j=c*(1-b),k=c*(1-b*(h-i)),l=c*(1-b*(1-(h-i)));return 0==i?(e=c,f=l,g=j):1==i?(e=k,f=c,g=j):2==i?(e=j,f=c,g=l):3==i?(e=j,f=k,g=c):4==i?(e=l,f=j,g=c):(e=c,f=j,g=k),this.r(Math.round(255*e)),this.g(Math.round(255*f)),this.b(Math.round(255*g)),this},hue:function(a){if(a!==d){var b=this.toHsv();return this.setHsv(a,b.s,b.v),this}return this.toHsv().h},getPerceivedBrightness:function(){var a=this.toRgb();return Math.sqrt(a.r*a.r*.241+a.g*a.g*.691+a.b*a.b*.068)}}}(window.jQuery,document,window),function(a,b,c,d){"use strict";c.SmallColorPicker=c.SmallColorPicker||{},SmallColorPicker.Transforms={},SmallColorPicker.Transforms.Transform2D=function(a){this.matrix=a,this.next=null},SmallColorPicker.Transforms.Transform2D.prototype={constructor:SmallColorPicker.Transforms.Transform2D,apply:function(a){var b=[this.matrix[0][0]*a[0]+this.matrix[0][1]*a[1]+this.matrix[0][2],this.matrix[1][0]*a[0]+this.matrix[1][1]*a[1]+this.matrix[1][2]];return this.next?this.next.apply(b):b},chain:function(a){return this.next?this.next.chain(a):this.next=a,this}},SmallColorPicker.Transforms.Translate2D=function(a,b){SmallColorPicker.Transforms.Transform2D.call(this,[[1,0,a],[0,1,b]])},SmallColorPicker.Transforms.Translate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Translate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D,SmallColorPicker.Transforms.Rotate2D=function(a){var b=Math.cos(a),c=Math.sin(a);SmallColorPicker.Transforms.Transform2D.call(this,[[b,-c,0],[c,b,0]])},SmallColorPicker.Transforms.Rotate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Rotate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D}(window.jQuery,document,window);