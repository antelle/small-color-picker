/*! SmallColorPicker v1.2.0  | (c) 2013 Antelle | https://github.com/antelle/small-color-picker/blob/master/MIT-LICENSE.txt */
(function(t,o,e,r){"use strict";function a(o){return t(o).hasClass("color-btn")}function i(o){return a(o)?t(o).find("b:first").css("background-color"):t(o).data(s)}function n(o,e){if(a(o)){t(o).find("b").css("background-color",e).end();var r=t(o).contents().last(),i=r.text();i.length&&"#"==i.charAt(0)&&(r.remove(),t(o).append(e))}t(o).data(s,e)}e.SmallColorPicker=e.SmallColorPicker||{};var l="scp",s="scp-col";SmallColorPicker.Proxy=function(t){this.els=t},SmallColorPicker.Proxy.prototype=function(){function o(o){return t(o).data("scp")}function e(e,r){var a=[];e.each(function(){var e=o(this);if(!e)return!0;var i=!1;return t.each(a,function(t,o){return o===e?(i=!0,!1):!0}),i?!0:(a.push(e),r.call(e))})}return{constructor:SmallColorPicker.Proxy,show:function(){return e(this.els,function(){this.show()}),this},hide:function(){return e(this.els,function(){this.hide()}),this},toggle:function(t){return e(this.els,function(){this.toggle(t)}),this},isVisible:function(){var t=!1;return e(this.els,function(){return this.isVisible()?(t=!0,!1):(t=!1,!0)}),t},switchMode:function(t){return e(this.els,function(){this.switchMode(t)}),this},setColors:function(t,o){return e(this.els,function(){this.setColors(t,o)}),this},parent:function(t){return this.els.length?o(this.els[0]).parent(t):null},destroy:function(){return e(this.els,function(){this.destroy()}),this.els.each(function(){t(this).removeData(l)}),this}}}(),t.fn.smallColorPicker=function(o){if(o===r||!this.length)return new SmallColorPicker.Proxy(this);if(!o.placement||o.placement.popup){var e=t.extend(!0,{},o,{placement:{parent:this[0]}}),a=new SmallColorPicker.CirclePicker(e);return t(this).data(l,a),this.on({click:function(){if(a.parent()[0]===this&&a.isVisible())a.hide();else{var t=i(this);a.parent(this),a.setColors(t,t),a.switchMode(SmallColorPicker.Mode.COLOR),a.show()}},scp_ok:function(t,o){n(this,o)}}),this}return this.each(function(){var e=t.extend(!0,{},o,{placement:{parent:this}}),r=new SmallColorPicker.CirclePicker(e);t(this).data(l,r)})}})(window.jQuery,document,window),function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Mode={COLOR:1,NUMBER:2},SmallColorPicker.defaults={placement:{position:"absolute",top:"0",left:"0",parent:null,popup:!0},colors:{colorOld:null,colorNew:"#ff0000"},texts:{ok:"OK",cancel:"Cancel",switchModeToNum:"Show numbers",switchModeToCol:"Show color wheel"},behavior:{rotate:!0,hideOnSelect:!0,mode:SmallColorPicker.Mode.COLOR,switchMode:!0,animation:!0}},SmallColorPicker.CirclePicker=function(a){function i(){n(),s(),c(),h(),b(),C()}function n(){z(Co)}function l(){w()}function s(){ho={redrawBug:-1!=navigator.userAgent.indexOf("Safari"),directCanvasRotate:-1==navigator.userAgent.indexOf("Firefox"),borderRadius:"borderRadius"in o.body.style,touch:"ontouchstart"in o}}function c(){if(!ho.borderRadius)throw"Browser is not supported"}function h(){io={},u(),fo.placement.popup&&d(),p(),f(),m(),v()}function u(){io.el=t("<div></div>").appendTo(fo.placement.popup?o.body:Co).addClass("s-c-p").css({position:fo.placement.position,left:fo.placement.left,top:fo.placement.top,display:"none"}),"static"==io.el.css("position")&&io.el.css("position","relative")}function d(){io.el.css("position","absolute"),io.el.addClass("s-c-p-popup"),io.arrow=t("<div></div>").appendTo(io.el).addClass("s-c-p-arrow"),io.arrowInner=t("<div></div>").appendTo(io.arrow).addClass("s-c-p-arrow-inner")}function p(){io.circle=t("<div></div>").appendTo(io.el).addClass("s-c-p-circle"),t("<div></div>").appendTo(io.circle).addClass("s-c-p-circle-inner"),io.circleMark=t("<div></div>").appendTo(io.circle).addClass("s-c-p-circle-mark"),io.square=t(ho.directCanvasRotate?"<canvas></canvas>":"<img/>").appendTo(io.el).addClass("s-c-p-square"),io.squareMark=t("<div></div>").appendTo(io.el).addClass("s-c-p-square-mark"),lo=ho.directCanvasRotate?io.square[0]:t("<canvas></canvas>").appendTo(io.el).hide()[0];var o=Math.min(io.square.width(),100);t(lo).attr({width:o,height:o})}function f(){var o=t("<div></div>").appendTo(io.el).addClass("s-c-p-color-texts");t.each({rgb:["r","g","b"],hsv:["h","s","b"]},function(e,r){var a=t("<div></div>").appendTo(o).addClass("s-c-p-column");t.each(r,function(o,r){var i=t("<div></div>").appendTo(a).addClass("s-c-p-row");t("<label></label>").appendTo(i).attr("for","s-c-p-txt-"+go+"-"+e+"-"+r).text(r.toUpperCase()+":");var n="rgb"==e?255:"h"==r?360:100;t("<input/>").attr({id:"s-c-p-txt-"+go+"-"+e+"-"+r,type:"text",maxLength:3,autocomplete:"off","data-prop":e,"data-col":r,"data-min":0,"data-max":n}).appendTo(i)})});var e=t("<div></div>").appendTo(o).addClass("s-c-p-row-full");t("<input/>").attr({id:"s-c-p-txt-"+go+"-hex",type:"text",maxLength:24,autocomplete:"off"}).appendTo(e)}function m(){io.colorOld=t("<div></div>").appendTo(io.el).addClass("s-c-p-color s-c-p-color-old"),io.colorNew=t("<div></div>").appendTo(io.el).addClass("s-c-p-color s-c-p-color-new"),io.sampleOld=t("<div></div>").appendTo(io.el).addClass("s-c-p-sample s-c-p-sample-old").text(fo.texts.cancel),io.sampleNew=t("<div></div>").appendTo(io.el).addClass("s-c-p-sample s-c-p-sample-new").text(fo.texts.ok)}function v(){fo.behavior.switchMode&&(io.modeSwitch=t("<div></div>").appendTo(io.el).addClass("s-c-p-mode-switch"))}function C(){no={globalSelectionMode:t(o.body).css("user-select"),squareWidth:io.square.width(),circleWidth:io.circle.width(),elWidth:io.el.width()}}function w(){io&&io.el&&io.el.remove()}function g(){if(fo.placement.popup){uo&&(clearTimeout(uo),uo=null);var o=Co.position(),r=Co.outerWidth(),a=Co.outerHeight(),i=t(e).outerHeight(),n=t(e).width(),l=io.el.outerWidth(),s=io.el.outerHeight(),c=10,h=1,u=1,d=15,p={},f={},m={},v=o.top-t(e).scrollTop(),C=i-a-v,w=o.left-t(e).scrollLeft(),g=n-r-w;Math.max(v,C)>s+c&&Math.min(w,g)>l/2-r/2+c?(p.left=o.left+r/2-l/2,f.left=l/2-d,m.left=-d,v>C?(p.top=o.top-s-d+3,f.top=s-2,m.top=-d-h,k("top",d)):(p.top=o.top+a+u+d,f.top=-d,m.top=h,k("bottom",d))):(p.top=o.top+a/2-s/2,f.top=s/2-d,m.top=-d,w>g?(p.left=o.left-l-d+2,f.left=l-1,m.left=-d-h,k("left",d)):(p.left=o.left+r+u+d,f.left=-d,m.left=h,k("right",d))),io.el.css(p),io.arrow.css(f),io.arrowInner.css(m)}}function k(o,e){var r,a=io.arrow.css("color"),i=io.arrowInner.css("color");switch(o){case"top":r="bottom";break;case"bottom":r="top";break;case"left":r="right";break;case"right":r="left"}t.each(["top","right","bottom","left"],function(t,n){var l="border-"+n,s=n==o?a:"transparent",c=n==r?"none":e+"px solid "+s;io.arrow.css(l,c),s=n==o?i:"transparent",c=n==r?"none":e+"px solid "+s,io.arrowInner.css(l,c)})}function b(){io.circle.on(ho.touch?"touchstart":"mousedown",S),io.square.on("selectstart",function(t){t.preventDefault()}).on(ho.touch?"touchstart":"mousedown",x),io.sampleNew.click(function(){fo.behavior.hideOnSelect&&(ao(),vo=mo),Co.trigger("scp_ok",[mo.toHex(),po])}),io.sampleOld.click(function(){fo.behavior.hideOnSelect&&ao(),Co.trigger("scp_cancel",[mo.toHex(),po])}),fo.placement.popup&&t(e).resize(y),io.modeSwitch&&io.modeSwitch.click(function(){F()}),t(".s-c-p-row input",io.el).focus(function(){t(this).data("oldval",+t(this).val())}).blur(function(o){var e=t(this).val(),r=Q(e,+t(this).data("min"),+t(this).data("max"));e!==""+r&&(t(this).val(isNaN(r)?+t(this).data("oldval"):r),D(o,!0))}).keyup(function(t){D(t,!1)}),t("#s-c-p-txt-"+go+"-hex",io.el).focus(function(){t(this).data("oldval",t(this).val())}).blur(function(o){var e=t(this).val(),r=X(e);e!==r&&(t(this).val(r||t(this).data("oldval")),H(o,!0))}).keyup(function(o){13===o.keyCode?(o.preventDefault(),t(this).blur(),io.sampleNew.click()):H(o,!1)})}function S(e){e.preventDefault(),R(E(e),_(e)),Y(!1),t(o).on(ho.touch?"touchmove":"mousemove",P).one(ho.touch?"touchend":"mouseup",T)}function x(e){e.preventDefault(),q(E(e),_(e)),Y(!1),t(o).on(ho.touch?"touchmove":"mousemove",M).one(ho.touch?"touchend":"mouseup",T)}function P(t){t.preventDefault(),R(E(t),_(t))}function M(t){t.preventDefault(),q(E(t),_(t))}function T(){Y(!0),t(o).off(ho.touch?"touchmove":"mousemove",P).off(ho.touch?"touchmove":"mousemove",M)}function y(){eo()&&fo.placement.popup&&!uo&&(uo=setTimeout(g,100))}function D(o,e){var r=t(o.target),a=Q(r.val(),+r.data("min"),+r.data("max"));if(isNaN(a))a=r.data("oldval");else if(!e&&a==r.data("oldval"))return;var i=r.data("prop"),n=r.data("col"),l=new SmallColorPicker.Color;switch(i){case"rgb":var s=J();s[n]=a,l.setRgb(s.r,s.g,s.b);break;case"hsv":var c=to();c["b"==n?"v":n]=a,l.setHsv(c.h,c.s,c.v)}mo.val!=l.val&&(mo=l,oo(),"rgb"==i?Z():G(),N())}function H(o,e){var r=t(o.target),a=X(r.val());if(a){if(!e&&a==r.data("oldval"))return}else a=r.data("oldval");var i=new SmallColorPicker.Color(a);mo.val!=i.val&&(mo=i,Z(),G(),N())}function R(t,o){var e=io.circle.offset(),r=O(t-e.left,o-e.top);mo.hue(r);var a=(new SmallColorPicker.Color).setHsv(r,100,100);A(a.toHex()),N(),B(r),V()}function q(t,o){if(!bo.fw){var e=io.circle.offset(),r=no.circleWidth/2,a=no.squareWidth/2;bo.fw=new SmallColorPicker.Transforms.Translate2D(-e.left-r,-e.top-r),fo.behavior.rotate&&bo.fw.chain(new SmallColorPicker.Transforms.Rotate2D(-ko)),bo.fw.chain(new SmallColorPicker.Transforms.Translate2D(a,a))}var i=bo.fw.apply([t,o]);t=Math.max(0,Math.min(no.squareWidth-1,i[0])),o=Math.max(0,Math.min(no.squareWidth-1,i[1])),mo=L(t,o),N(),V(t,o)}function O(t,o){var e=no.circleWidth;t-=e/2,o-=e/2;var r=Math.atan2(t,o);return 180-360*(r/Math.PI/2)}function L(t,o){var e=lo.getContext("2d"),r=e.getImageData(t,o,1,1).data;return(new SmallColorPicker.Color).setRgb(r[0],r[1],r[2])}function I(){io.colorOld[0].innerHTML=null===vo?"":vo.toHex(),W(io.sampleOld,null===vo?new SmallColorPicker.Color(10066329):vo,"old")}function N(){io.colorNew[0].innerHTML=mo.toHex()+"<br/>",W(io.sampleNew,mo,"new")}function W(t,o,e){var r=o.toHsv().v;t[0].style.backgroundColor=o.toHex(),no.colorSamplesLight||(no.colorSamplesLight={}),r>80?no.colorSamplesLight[e]!==!0&&(no.colorSamplesLight[e]=!0,t.addClass("s-c-p-light")):no.colorSamplesLight[e]!==!1&&(no.colorSamplesLight[e]=!1,t.removeClass("s-c-p-light"))}function A(t){var o=new SmallColorPicker.Color(t),e=o.hue(),r=lo.width,a=lo.getContext("2d");a.clearRect(0,0,r,r);for(var i=a.createImageData(r,r),n=i.data,l=0;r>l;l++)for(var s=0;r>s;s++){o.setHsv(e,Math.round(100*l/(r-1)),Math.round(100*s/(r-1)));var c=4*((r-s-1)*r+l);n[c]=o.r(),n[c+1]=o.g(),n[c+2]=o.b(),n[c+3]=255}a.putImageData(i,0,0),ho.directCanvasRotate||(io.square[0].src=lo.toDataURL())}function B(t){var o=t===r?mo.hue():t,e=o/180*Math.PI,a=no.circleWidth,i=.025,n={transform:"rotate("+e+"rad)",left:a/2-a*Math.sin(-e+i)/2,top:a/2-a*Math.cos(-e+i)/2};io.circleMark.css(n),ko=e-Math.PI/4,bo={},fo.behavior.rotate&&io.square.css({transform:"rotate("+ko+"rad)"})}function V(t,o){var e=no.squareWidth,a=mo.toHsv(),i=0,n=0;if(t!==r&&(so=t),o!==r&&(co=o),so!==r&&co!==r?(i+=so,n+=co):(i+=a.s*e/100,n+=e-a.v*e/100,i=Math.max(0,Math.min(e-1,i)),n=Math.max(0,Math.min(e-1,n))),!bo.rev){var l=no.squareWidth/2,s=no.elWidth/2;bo.rev=new SmallColorPicker.Transforms.Translate2D(-l,-l),fo.behavior.rotate&&bo.rev.chain(new SmallColorPicker.Transforms.Rotate2D(ko)),bo.rev.chain(new SmallColorPicker.Transforms.Translate2D(s-3,s-3))}var c=bo.rev.apply([i,n]),h=io.squareMark[0].style;h.left=c[0]+"px",h.top=c[1]+"px",U()}function U(){var t=mo.getPerceivedBrightness()>125;if(no.isSqMaskLight!==t){no.isSqMaskLight=t;var o=(new SmallColorPicker.Color).setHsv(0,0,t?40:90);io.squareMark[0].style.borderColor=o.toHex(),j(io.squareMark[0])}}function $(){B(),V()}function E(t){return t.pageX!==r?t.pageX:t.originalEvent.pageX}function _(t){return t.pageY!==r?t.pageY:t.originalEvent.pageY}function j(t){ho.redrawBug&&(t.style.display="inline-block",t.offsetHeight,t.style.display="block")}function Q(o,e,r){o=t.trim(o);var a;if(/^\d*$/g.test(o))a=+o;else{if(!/^[\da-f]+$/gi.test(o))return 0/0;a=parseInt(o,16)}return Math.max(e,Math.min(r,a))}function X(o){try{return new SmallColorPicker.Color(o).toHex()}catch(e){if(/^[a-z]+$/gi.test(o)){o=o.toLowerCase();var r=t("<div style='color:black'></div>").css("color",o).appendTo("body"),a=r.css("color");r.remove();try{return a=new SmallColorPicker.Color(a),a.val||"black"==o?a.toHex():null}catch(i){return null}}return null}}function Y(e){t(o.body).css({webkitUserSelect:e?no.globalSelectionMode:"none"})}function z(t){if(1!=t.length)throw"Color picker should have exactly one parent"}function F(t){var o=t!==r?t:wo==SmallColorPicker.Mode.COLOR?SmallColorPicker.Mode.NUMBER:SmallColorPicker.Mode.COLOR;wo!==o&&(wo=o,K())}function K(){wo==SmallColorPicker.Mode.NUMBER?(io.el.addClass("s-c-p-mode-num"),io.squareMark.hide(),io.modeSwitch&&io.modeSwitch.attr("title",fo.texts.switchModeToCol),G(),Z(),oo(),t("#s-c-p-txt-"+go+"-hex",io.el).focus()):(io.el.removeClass("s-c-p-mode-num"),io.squareMark.show(),io.modeSwitch&&io.modeSwitch.attr("title",fo.texts.switchModeToNum),A(mo.toHex()),$())}function G(){t.each(mo.toRgb(),function(o,e){t("#s-c-p-txt-"+go+"-rgb-"+o,io.el).val(e)})}function J(){var o={};return t.each(["r","g","b"],function(e,r){o[r]=~~t("#s-c-p-txt-"+go+"-rgb-"+r,io.el).val()}),o}function Z(){t.each(mo.toHsv(),function(o,e){t("#s-c-p-txt-"+go+"-hsv-"+("v"===o?"b":o),io.el).val(Math.round(e))})}function to(){var o={};return t.each(["h","s","v"],function(e,r){o[r]=~~t("#s-c-p-txt-"+go+"-hsv-"+("v"===r?"b":r),io.el).val()}),o}function oo(){t("#s-c-p-txt-"+go+"-hex",io.el).val(mo.toHex())}function eo(){return io&&io.el&&io.el.is(":visible")}function ro(t){var o=eo();io.el.stop().css("display","block"),I(),N(),g(),K(),o||(t===r&&(t=fo.behavior.animation),t&&io.el.fadeIn(200),Co.trigger("scp_show",[po]))}function ao(t){eo()&&(io.el.stop(),t===r&&(t=fo.behavior.animation),t?io.el.fadeOut(200):io.el.hide(),Co.trigger("scp_hide",[po]))}var io,no,lo,so,co,ho,uo,po=this,fo=t.extend(!0,{},SmallColorPicker.defaults,a),mo=new SmallColorPicker.Color(fo.colors.colorNew),vo=new SmallColorPicker.Color(fo.colors.colorOld),Co=fo.placement.parent?t(fo.placement.parent):t(o.body),wo=fo.behavior.mode,go=~~(1e4*Math.random()),ko=0,bo={};i(),fo.placement.popup||ro(),this.destroy=l,this.setColors=function(t,o){t!==r&&(mo=new SmallColorPicker.Color(t)),o!==r&&(vo=null===o?null:new SmallColorPicker.Color(o)),this.isVisible()&&this.show()},this.switchMode=F,this.toggle=function(t){t===r&&(t=!this.isVisible()),t?this.show():this.hide()},this.isVisible=eo,this.show=ro,this.hide=ao,this.parent=function(o){return o&&(z(t(o)),this.isVisible()?(this.hide(!1),Co=t(o),this.show(!1)):Co=t(o)),Co}}}(window.jQuery,document,window),function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Color=function(t){if(this.val=0,"number"==typeof t)this.val=t;else if("string"==typeof t)if("#"===t.charAt(0))if(/^#[\da-f]{6}$/gi.test(t))this.val=parseInt(t.substr(1),16);else{if(!/^#[\da-f]{3}$/gi.test(t))throw"Invalid color: "+t;this.val=parseInt(t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3),16)}else{var o=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*([\d\.]+))?\)$/g.exec(t);if(!o)throw"Invalid color: "+t;this.setRgb(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}},SmallColorPicker.Color.prototype={constructor:SmallColorPicker.Color,r:function(t){return t!==r?(this.val=65535&this.val|t<<16,t):255&this.val>>16},g:function(t){return t!==r?(this.val=16711935&this.val|t<<8,t):255&this.val>>8},b:function(t){return t!==r?(this.val=16776960&this.val|t,t):255&this.val},toHex:function(){var t=("00000"+this.val.toString(16)).substr(-6);return"#"+t},toRgb:function(){return{r:this.r(),g:this.g(),b:this.b()}},toRgbStr:function(){return"rgb("+this.r()+","+this.g()+","+this.b()+")"},setRgb:function(t,o,e){return this.r(t),this.g(o),this.b(e),this},toHsv:function(){var t,o,e,r=this.r(),a=this.g(),i=this.b(),n=Math.min(r,a,i),l=Math.max(r,a,i),s=l-n;if(e=Math.floor(100*(l/255)),0==l)return{h:0,s:0,v:0};o=Math.floor(100*(s/l));var c=0==s?1:s;return t=r==l?(a-i)/c:a==l?2+(i-r)/c:4+(r-a)/c,t=Math.floor(60*t),0>t&&(t+=360),{h:t,s:o,v:e}},setHsv:function(t,o,e){if(t/=360,o/=100,e/=100,0==o){var r=Math.round(255*e);return this.r(r),this.g(r),this.b(r),this}var a,i,n,l=6*t,s=Math.floor(l),c=e*(1-o),h=e*(1-o*(l-s)),u=e*(1-o*(1-(l-s)));return 0==s?(a=e,i=u,n=c):1==s?(a=h,i=e,n=c):2==s?(a=c,i=e,n=u):3==s?(a=c,i=h,n=e):4==s?(a=u,i=c,n=e):(a=e,i=c,n=h),this.r(Math.round(255*a)),this.g(Math.round(255*i)),this.b(Math.round(255*n)),this},hue:function(t){if(t!==r){var o=this.toHsv();return this.setHsv(t,o.s,o.v),this}return this.toHsv().h},getPerceivedBrightness:function(){var t=this.toRgb();return Math.sqrt(.241*t.r*t.r+.691*t.g*t.g+.068*t.b*t.b)}}}(window.jQuery,document,window),function(t,o,e){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Transforms={},SmallColorPicker.Transforms.Transform2D=function(t){this.matrix=t,this.next=null},SmallColorPicker.Transforms.Transform2D.prototype={constructor:SmallColorPicker.Transforms.Transform2D,apply:function(t){var o=[this.matrix[0][0]*t[0]+this.matrix[0][1]*t[1]+this.matrix[0][2],this.matrix[1][0]*t[0]+this.matrix[1][1]*t[1]+this.matrix[1][2]];return this.next?this.next.apply(o):o},chain:function(t){return this.next?this.next.chain(t):this.next=t,this}},SmallColorPicker.Transforms.Translate2D=function(t,o){SmallColorPicker.Transforms.Transform2D.call(this,[[1,0,t],[0,1,o]])},SmallColorPicker.Transforms.Translate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Translate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D,SmallColorPicker.Transforms.Rotate2D=function(t){var o=Math.cos(t),e=Math.sin(t);SmallColorPicker.Transforms.Transform2D.call(this,[[o,-e,0],[e,o,0]])},SmallColorPicker.Transforms.Rotate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Rotate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D}(window.jQuery,document,window);