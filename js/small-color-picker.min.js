/*! SmallColorPicker v1.1.0  | (c) 2013 Antelle | https://github.com/antelle/small-color-picker/blob/master/MIT-LICENSE.txt */
(function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Mode={COLOR:1,NUMBER:2},SmallColorPicker.defaults={placement:{position:"absolute",top:"0",left:"0",parent:null,popup:!1},colors:{colorOld:null,colorNew:"#ff0000"},texts:{ok:"OK",cancel:"Cancel",switchModeToNum:"Show numbers",switchModeToCol:"Show color wheel"},behavior:{rotate:!0,hideOnSelect:!0,mode:SmallColorPicker.Mode.COLOR,switchMode:!0,animation:!0},events:{ok:null,cancel:null}},SmallColorPicker.CirclePicker=function(a){function l(){i(),s(),d(),w(),C()}function i(){ao={redrawBug:-1!=navigator.userAgent.indexOf("Safari"),directCanvasRotate:-1==navigator.userAgent.indexOf("Firefox"),borderRadius:"borderRadius"in o.body.style}}function s(){if(!ao.borderRadius)throw"Browser is not supported"}function n(){if(io.placement.popup&&co){lo&&(clearTimeout(lo),lo=null);var o=co.position(),r=co.outerWidth(),a=co.outerHeight(),l=t(e).outerHeight(),i=t(e).width(),s=_.el.outerWidth(),n=_.el.outerHeight(),d=10,h=1,u=1,p=15,f={},m={},v={},C=o.top-t(e).scrollTop(),w=l-a-C,g=o.left-t(e).scrollLeft(),b=i-r-g;Math.max(C,w)>n+d&&Math.min(g,b)>s/2-r/2+d?(f.left=o.left+r/2-s/2,m.left=s/2-p,v.left=-p,C>w?(f.top=o.top-n-p+3,m.top=n-2,v.top=-p-h,c("top",p)):(f.top=o.top+a+u+p,m.top=-p,v.top=h,c("bottom",p))):(f.top=o.top+a/2-n/2,m.top=n/2-p,v.top=-p,g>b?(f.left=o.left-s-p+2,m.left=s-1,v.left=-p-h,c("left",p)):(f.left=o.left+r+u+p,m.left=-p,v.left=h,c("right",p))),_.el.css(f),_.arrow.css(m),_.arrowInner.css(v)}}function c(o,e){var r,a=_.arrow.css("color"),l=_.arrowInner.css("color");switch(o){case"top":r="bottom";break;case"bottom":r="top";break;case"left":r="right";break;case"right":r="left"}t.each(["top","right","bottom","left"],function(t,i){var s="border-"+i,n=i==o?a:"transparent",c=i==r?"none":e+"px solid "+n;_.arrow.css(s,c),n=i==o?l:"transparent",c=i==r?"none":e+"px solid "+n,_.arrowInner.css(s,c)})}function d(){_={},h(),io.placement.popup&&u(),p(),f(),m(),v()}function h(){_.el=t("<div></div>").appendTo(io.placement.popup||!co?o.body:co).addClass("s-c-p").css({position:io.placement.position,left:io.placement.left,top:io.placement.top}),"static"==_.el.css("position")&&_.el.css("position","relative")}function u(){_.el.css("position","absolute"),_.el.addClass("s-c-p-popup"),_.arrow=t("<div></div>").appendTo(_.el).addClass("s-c-p-arrow"),_.arrowInner=t("<div></div>").appendTo(_.arrow).addClass("s-c-p-arrow-inner")}function p(){_.circle=t("<div></div>").appendTo(_.el).addClass("s-c-p-circle"),t("<div></div>").appendTo(_.circle).addClass("s-c-p-circle-inner"),_.circleMark=t("<div></div>").appendTo(_.circle).addClass("s-c-p-circle-mark"),_.square=t(ao.directCanvasRotate?"<canvas></canvas>":"<img/>").appendTo(_.el).addClass("s-c-p-square"),_.squareMark=t("<div></div>").appendTo(_.el).addClass("s-c-p-square-mark"),oo=ao.directCanvasRotate?_.square[0]:t("<canvas></canvas>").appendTo(_.el).hide()[0];var o=Math.min(_.square.width(),100);t(oo).attr({width:o,height:o})}function f(){var o=t("<div></div>").appendTo(_.el).addClass("s-c-p-color-texts");t.each({rgb:["r","g","b"],hsv:["h","s","b"]},function(e,r){var a=t("<div></div>").appendTo(o).addClass("s-c-p-column");t.each(r,function(o,r){var l=t("<div></div>").appendTo(a).addClass("s-c-p-row");t("<label></label>").appendTo(l).attr("for","s-c-p-txt-"+uo+"-"+e+"-"+r).text(r.toUpperCase()+":");var i="rgb"==e?255:"h"==r?360:100;t("<input/>").attr({id:"s-c-p-txt-"+uo+"-"+e+"-"+r,type:"text",maxLength:3,autocomplete:"off","data-prop":e,"data-col":r,"data-min":0,"data-max":i}).appendTo(l)})});var e=t("<div></div>").appendTo(o).addClass("s-c-p-row-full");t("<input/>").attr({id:"s-c-p-txt-"+uo+"-hex",type:"text",maxLength:24,autocomplete:"off"}).appendTo(e)}function m(){_.colorOld=t("<div></div>").appendTo(_.el).addClass("s-c-p-color s-c-p-color-old"),_.colorNew=t("<div></div>").appendTo(_.el).addClass("s-c-p-color s-c-p-color-new"),_.sampleOld=t("<div></div>").appendTo(_.el).addClass("s-c-p-sample s-c-p-sample-old").text(io.texts.cancel),_.sampleNew=t("<div></div>").appendTo(_.el).addClass("s-c-p-sample s-c-p-sample-new").text(io.texts.ok)}function v(){io.behavior.switchMode&&(_.modeSwitch=t("<div></div>").appendTo(_.el).addClass("s-c-p-mode-switch"))}function C(){to={globalSelectionMode:t(o.body).css("user-select"),squareWidth:_.square.width(),circleWidth:_.circle.width(),elWidth:_.el.width()}}function w(){_.circle.on("mousedown",g),_.square.on("mousedown",b).on("selectstart",function(t){t.preventDefault()}),_.sampleNew.click(function(){io.behavior.hideOnSelect&&(Z(),no=so),io.events.ok&&io.events.ok(so.toHex())}),_.sampleOld.click(function(){io.behavior.hideOnSelect&&Z(),io.events.cancel&&io.events.cancel(no.toHex())}),io.placement.popup&&co&&t(e).resize(T),_.modeSwitch&&_.modeSwitch.click(function(){Y()}),t(".s-c-p-row input",_.el).focus(function(){t(this).data("oldval",+t(this).val())}).blur(function(o){var e=t(this).val(),r=$(e,+t(this).data("min"),+t(this).data("max"));e!==""+r&&(t(this).val(isNaN(r)?+t(this).data("oldval"):r),M(o,!0))}).keyup(function(t){M(t,!1)}),t("#s-c-p-txt-"+uo+"-hex",_.el).focus(function(){t(this).data("oldval",t(this).val())}).blur(function(o){var e=t(this).val(),r=V(e);e!==r&&(t(this).val(r||t(this).data("oldval")),P(o,!0))}).keyup(function(t){P(t,!1)})}function g(e){e.preventDefault(),y(e.pageX,e.pageY),R(!1),t(o).on("mousemove",k).one("mouseup",x)}function b(e){e.preventDefault(),H(e.pageX,e.pageY),R(!1),t(o).on("mousemove",S).one("mouseup",x)}function k(t){y(t.pageX,t.pageY)}function S(t){H(t.pageX,t.pageY)}function x(){R(!0),t(o).off("mousemove",k).off("mousemove",S)}function T(){G()&&io.placement.popup&&!lo&&(lo=setTimeout(n,100))}function M(o,e){var r=t(o.target),a=$(r.val(),+r.data("min"),+r.data("max"));if(isNaN(a))a=r.data("oldval");else if(!e&&a==r.data("oldval"))return;var l=r.data("prop"),i=r.data("col"),s=new SmallColorPicker.Color;switch(l){case"rgb":var n=Q();n[i]=a,s.setRgb(n.r,n.g,n.b);break;case"hsv":var c=F();c["b"==i?"v":i]=a,s.setHsv(c.h,c.s,c.v)}so.val!=s.val&&(so=s,K(),"rgb"==l?z():E(),I())}function P(o,e){var r=t(o.target),a=V(r.val());if(a){if(!e&&a==r.data("oldval"))return}else a=r.data("oldval");var l=new SmallColorPicker.Color(a);so.val!=l.val&&(so=l,z(),E(),I())}function y(t,o){var e=_.circle.offset(),r=D(t-e.left,o-e.top);so.hue(r);var a=(new SmallColorPicker.Color).setHsv(r,100,100);N(a.toHex()),I(),W(r),A()}function H(t,o){if(!fo.fw){var e=_.circle.offset(),r=to.circleWidth/2,a=to.squareWidth/2;fo.fw=new SmallColorPicker.Transforms.Translate2D(-e.left-r,-e.top-r),io.behavior.rotate&&fo.fw.chain(new SmallColorPicker.Transforms.Rotate2D(-po)),fo.fw.chain(new SmallColorPicker.Transforms.Translate2D(a,a))}var l=fo.fw.apply([t,o]);t=Math.max(0,Math.min(to.squareWidth-1,l[0])),o=Math.max(0,Math.min(to.squareWidth-1,l[1])),so=q(t,o),I(),A(t,o)}function R(e){t(o.body).css({webkitUserSelect:e?to.globalSelectionMode:"none"})}function D(t,o){var e=to.circleWidth;t-=e/2,o-=e/2;var r=Math.atan2(t,o);return 180-360*(r/Math.PI/2)}function q(t,o){var e=oo.getContext("2d"),r=e.getImageData(t,o,1,1).data;return(new SmallColorPicker.Color).setRgb(r[0],r[1],r[2])}function O(){_.colorOld[0].innerHTML=null===no?"":no.toHex(),L(_.sampleOld,null===no?new SmallColorPicker.Color(10066329):no,"old")}function I(){_.colorNew[0].innerHTML=so.toHex()+"<br/>",L(_.sampleNew,so,"new")}function L(t,o,e){var r=o.toHsv().v;t[0].style.backgroundColor=o.toHex(),to.colorSamplesLight||(to.colorSamplesLight={}),r>80?to.colorSamplesLight[e]!==!0&&(to.colorSamplesLight[e]=!0,t.addClass("s-c-p-light")):to.colorSamplesLight[e]!==!1&&(to.colorSamplesLight[e]=!1,t.removeClass("s-c-p-light"))}function N(t){var o=new SmallColorPicker.Color(t),e=o.hue(),r=oo.width,a=oo.getContext("2d");a.clearRect(0,0,r,r);for(var l=a.createImageData(r,r),i=l.data,s=0;r>s;s++)for(var n=0;r>n;n++){o.setHsv(e,Math.round(100*s/(r-1)),Math.round(100*n/(r-1)));var c=4*((r-n-1)*r+s);i[c]=o.r(),i[c+1]=o.g(),i[c+2]=o.b(),i[c+3]=255}a.putImageData(l,0,0),ao.directCanvasRotate||(_.square[0].src=oo.toDataURL())}function W(t){var o=t===r?so.hue():t,e=o/180*Math.PI,a=to.circleWidth,l=.025,i={transform:"rotate("+e+"rad)",left:a/2-a*Math.sin(-e+l)/2,top:a/2-a*Math.cos(-e+l)/2};_.circleMark.css(i),po=e-Math.PI/4,fo={},io.behavior.rotate&&_.square.css({transform:"rotate("+po+"rad)"})}function A(t,o){var e=to.squareWidth,a=so.toHsv(),l=0,i=0;if(t!==r&&(eo=t),o!==r&&(ro=o),eo!==r&&ro!==r?(l+=eo,i+=ro):(l+=a.s*e/100,i+=e-a.v*e/100,l=Math.max(0,Math.min(e-1,l)),i=Math.max(0,Math.min(e-1,i))),!fo.rev){var s=to.squareWidth/2,n=to.elWidth/2;fo.rev=new SmallColorPicker.Transforms.Translate2D(-s,-s),io.behavior.rotate&&fo.rev.chain(new SmallColorPicker.Transforms.Rotate2D(po)),fo.rev.chain(new SmallColorPicker.Transforms.Translate2D(n-3,n-3))}var c=fo.rev.apply([l,i]),d=_.squareMark[0].style;d.left=c[0]+"px",d.top=c[1]+"px",B()}function B(){var t=so.getPerceivedBrightness()>125;if(to.isSqMaskLight!==t){to.isSqMaskLight=t;var o=(new SmallColorPicker.Color).setHsv(0,0,t?40:90);_.squareMark[0].style.borderColor=o.toHex(),U(_.squareMark[0])}}function U(t){ao.redrawBug&&(t.style.display="inline-block",t.offsetHeight,t.style.display="block")}function $(o,e,r){o=t.trim(o);var a;if(/^\d*$/g.test(o))a=+o;else{if(!/^[\da-f]+$/gi.test(o))return 0/0;a=parseInt(o,16)}return Math.max(e,Math.min(r,a))}function V(o){try{return new SmallColorPicker.Color(o).toHex()}catch(e){if(/^[a-z]+$/gi.test(o)){o=o.toLowerCase();var r=t("<div style='color:black'></div>").css("color",o).appendTo("body"),a=r.css("color");r.remove();try{return a=new SmallColorPicker.Color(a),a.val||"black"==o?a.toHex():null}catch(l){return null}}return null}}function X(){W(),A()}function Y(){ho=ho==SmallColorPicker.Mode.COLOR?SmallColorPicker.Mode.NUMBER:SmallColorPicker.Mode.COLOR,j()}function j(){ho==SmallColorPicker.Mode.NUMBER?(_.el.addClass("s-c-p-mode-num"),_.squareMark.hide(),_.modeSwitch&&_.modeSwitch.attr("title",io.texts.switchModeToCol),E(),z(),K()):(_.el.removeClass("s-c-p-mode-num"),_.squareMark.show(),_.modeSwitch&&_.modeSwitch.attr("title",io.texts.switchModeToNum),N(so.toHex()),X())}function E(){t.each(so.toRgb(),function(o,e){t("#s-c-p-txt-"+uo+"-rgb-"+o,_.el).val(e)})}function Q(){var o={};return t.each(["r","g","b"],function(e,r){o[r]=~~t("#s-c-p-txt-"+uo+"-rgb-"+r,_.el).val()}),o}function z(){t.each(so.toHsv(),function(o,e){t("#s-c-p-txt-"+uo+"-hsv-"+("v"===o?"b":o),_.el).val(Math.round(e))})}function F(){var o={};return t.each(["h","s","v"],function(e,r){o[r]=~~t("#s-c-p-txt-"+uo+"-hsv-"+("v"===r?"b":r),_.el).val()}),o}function K(){t("#s-c-p-txt-"+uo+"-hex",_.el).val(so.toHex())}function G(){return _&&_.el&&_.el.is(":visible")}function J(t){_||l(),O(),I(),n(),j(),t===r&&(t=io.behavior.animation),t?_.el.fadeIn(200):_.el.show()}function Z(t){t===r&&(t=io.behavior.animation),t?_.el.fadeOut(200):_.el.show()}var _,to,oo,eo,ro,ao,lo,io=t.extend(!0,{},SmallColorPicker.defaults,a),so=new SmallColorPicker.Color(io.colors.colorNew),no=new SmallColorPicker.Color(io.colors.colorOld),co=io.placement.parent?t(io.placement.parent):null,ho=io.behavior.mode,uo=~~(1e4*Math.random()),po=0,fo={};this.toggle=function(){this.isVisible()?this.hide():this.show()},this.isVisible=G,this.show=J,this.hide=Z,this.switchMode=Y,this.setColors=function(t,o){t!==r&&(so=new SmallColorPicker.Color(t)),o!==r&&(no=null===o?null:new SmallColorPicker.Color(o)),this.isVisible()&&this.show()},this.parent=function(o){return o&&(this.isVisible()?(this.hide(!1),co=t(o),this.show(!1)):co=t(o)),co}}})(window.jQuery,document,window),function(t,o,e,r){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Color=function(t){if(this.val=0,"number"==typeof t)this.val=t;else if("string"==typeof t)if("#"===t.charAt(0))if(/^#[\da-f]{6}$/gi.test(t))this.val=parseInt(t.substr(1),16);else{if(!/^#[\da-f]{3}$/gi.test(t))throw"Invalid color: "+t;this.val=parseInt(t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)+t.charAt(3)+t.charAt(3),16)}else{var o=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(,\s*([\d\.]+))?\)$/g.exec(t);if(!o)throw"Invalid color: "+t;this.setRgb(parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}},SmallColorPicker.Color.prototype={constructor:SmallColorPicker.Color,r:function(t){return t!==r?(this.val=65535&this.val|t<<16,t):255&this.val>>16},g:function(t){return t!==r?(this.val=16711935&this.val|t<<8,t):255&this.val>>8},b:function(t){return t!==r?(this.val=16776960&this.val|t,t):255&this.val},toHex:function(){var t=("00000"+this.val.toString(16)).substr(-6);return"#"+t},toRgb:function(){return{r:this.r(),g:this.g(),b:this.b()}},toRgbStr:function(){return"rgb("+this.r()+","+this.g()+","+this.b()+")"},setRgb:function(t,o,e){return this.r(t),this.g(o),this.b(e),this},toHsv:function(){var t,o,e,r=this.r(),a=this.g(),l=this.b(),i=Math.min(r,a,l),s=Math.max(r,a,l),n=s-i;if(e=Math.floor(100*(s/255)),0==s)return{h:0,s:0,v:0};o=Math.floor(100*(n/s));var c=0==n?1:n;return t=r==s?(a-l)/c:a==s?2+(l-r)/c:4+(r-a)/c,t=Math.floor(60*t),0>t&&(t+=360),{h:t,s:o,v:e}},setHsv:function(t,o,e){if(t/=360,o/=100,e/=100,0==o){var r=Math.round(255*e);return this.r(r),this.g(r),this.b(r),this}var a,l,i,s=6*t,n=Math.floor(s),c=e*(1-o),d=e*(1-o*(s-n)),h=e*(1-o*(1-(s-n)));return 0==n?(a=e,l=h,i=c):1==n?(a=d,l=e,i=c):2==n?(a=c,l=e,i=h):3==n?(a=c,l=d,i=e):4==n?(a=h,l=c,i=e):(a=e,l=c,i=d),this.r(Math.round(255*a)),this.g(Math.round(255*l)),this.b(Math.round(255*i)),this},hue:function(t){if(t!==r){var o=this.toHsv();return this.setHsv(t,o.s,o.v),this}return this.toHsv().h},getPerceivedBrightness:function(){var t=this.toRgb();return Math.sqrt(.241*t.r*t.r+.691*t.g*t.g+.068*t.b*t.b)}}}(window.jQuery,document,window),function(t,o,e){"use strict";e.SmallColorPicker=e.SmallColorPicker||{},SmallColorPicker.Transforms={},SmallColorPicker.Transforms.Transform2D=function(t){this.matrix=t,this.next=null},SmallColorPicker.Transforms.Transform2D.prototype={constructor:SmallColorPicker.Transforms.Transform2D,apply:function(t){var o=[this.matrix[0][0]*t[0]+this.matrix[0][1]*t[1]+this.matrix[0][2],this.matrix[1][0]*t[0]+this.matrix[1][1]*t[1]+this.matrix[1][2]];return this.next?this.next.apply(o):o},chain:function(t){return this.next?this.next.chain(t):this.next=t,this}},SmallColorPicker.Transforms.Translate2D=function(t,o){SmallColorPicker.Transforms.Transform2D.call(this,[[1,0,t],[0,1,o]])},SmallColorPicker.Transforms.Translate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Translate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D,SmallColorPicker.Transforms.Rotate2D=function(t){var o=Math.cos(t),e=Math.sin(t);SmallColorPicker.Transforms.Transform2D.call(this,[[o,-e,0],[e,o,0]])},SmallColorPicker.Transforms.Rotate2D.prototype=new SmallColorPicker.Transforms.Transform2D,SmallColorPicker.Transforms.Rotate2D.prototype.constructor=SmallColorPicker.Transforms.Translate2D}(window.jQuery,document,window);